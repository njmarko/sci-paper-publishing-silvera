import "setup.si"

service SciPaperService{
	service_registry=ServiceRegistry

	api {
		typedef Section[
			str name
			str content
		]

		@crud
		typedef SciPaper[
			str author
			str title
			list<Section> sections
		]

		@rest(method=POST)
		@producer(PaperMsgGroup.PublishPaper -> Broker.PUBLISH_PAPPER)
		SciPaper createPaper(SciPaper sciPaper)

		@rest(method=POST)
		bool publish(str id, str username)

	}
}
